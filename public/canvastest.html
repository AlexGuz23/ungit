<html>
<head>
  <meta charset="utf-8">
  <title>Log renderer dev</title>
  <link rel="stylesheet" href="styles/mocha.css" />
</head>
<body>

<style>
body {
	background: #f0f0f0;
}
#canvas {
	position: absolute;
	left: 1200px;
	top: 100px;
}
#mocha {
	width: 800px;
	position: absolute;
}
</style>

<div id="mocha"></div>
<canvas id="canvas" width="900" height="900"></canvas>

<script src="scripts/lib/expect.js"></script>
<script src="scripts/lib/mocha.js"></script>
<script>mocha.setup('bdd')</script>
<script type="text/javascript" src="/scripts/lib/moment.js"></script>
<script type="text/javascript" src="/scripts/lib/underscore.js"></script>
<script type='text/javascript' src='/scripts/lib/knockout-2.2.1.js'></script>
<script type='text/javascript' src='/scripts/gitGraph.js'></script>
<script type='text/javascript' src='/scripts/vector2.js'></script>
<script type='text/javascript' src='/scripts/logrenderer.js'></script>
<script type='text/javascript' src='/test/spec.vector2.js'></script>
<script type='text/javascript' src='/test/spec.gitgraph.js'></script>

<script>

var log = [
{"sha1":"6d706ae597d56bb64fc8def5b3c9f0a91909af8b","parents":["ae03f555da711c045a6848d27483f9d79d7f57c2"],"refs":["HEAD","refs/heads/testing"],"authorName":"Fredrik Noren","authorEmail":"fredrik.noren@keldyn.com","date":"Thu May 23 21:03:54 2013 +0200","title":"Some test","message":"Some test"},
{"sha1":"81c6e0156c0ecdd3e14c3d9dd01e0c1ac61966df","parents":["ae03f555da711c045a6848d27483f9d79d7f57c2"],"refs":["refs/heads/master"],"authorName":"Fredrik Noren","authorEmail":"fredrik.noren@keldyn.com","date":"Thu May 23 21:03:01 2013 +0200","title":"Main","message":"Main"},
{"sha1":"ae03f555da711c045a6848d27483f9d79d7f57c2","parents":[],"authorName":"Fredrik Noren","authorEmail":"fredrik.noren@keldyn.com","date":"Thu May 23 21:02:37 2013 +0200","title":"Init","message":"Init"}];

var graph = new GitGraphViewModel();
graph.setNodesFromLog(log);

var runner = mocha.run(function(failures) {
	if (runner.failures) return;
	var c = document.getElementById("canvas");
	var logArgs = function(name) { console.log(name, arguments); }
	logRenderer.render(c, graph.nodes(), graph.nodesById, graph.refsByRefName);
});


</script>

</body>
</html>